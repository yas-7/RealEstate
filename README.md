# Flat Prices — Мониторинг цен на новостройки

Проект для мониторинга цен на квартиры в новостройках.  
Раз в день запускается парсер, который собирает данные с сайта застройщика и сохраняет их в базу данных.  
На сайте можно посмотреть актуальные цены и график изменения цен на конкретные квартиры.
Этот проект был создан, чтобы собрать и визуализировать статистику изменения цен на квартиры в новостройках.


Демо проекта доступно по адресу: [flat-prices.ru](https://flat-prices.ru)


---

## Стек технологий

### Backend
- **Java 21**
- **Spring Boot 3**
    - Spring Web
    - Spring Data JPA
- **PostgreSQL** — база данных
- **Liquibase** — управление миграциями БД
- **Docker** — для локального запуска сервисов
- **Jsoup** — парсинг HTML
- **Apache HttpClient 5** — запросы к сайтам застройщиков
- **Gradle** — сборка проекта
- **Nginx** — для проксирования запросов на сервере

### Frontend
- **React + Vite**

  Frontend часть можно посмотреть тут https://github.com/yas-7/RealEstate_Front
---

## Краткое описание API

### Жилищные комплексы
**Base URL:** `/api/complexes`

| Метод      | URL                | Описание                       |
|------------|--------------------|--------------------------------|
| `GET`      | `/api/complexes`   | Список ЖК с пагинацией         |
| `GET`      | `/api/complexes/{id}` | Детали конкретного ЖК         |

Пример ответа (`GET /api/complexes`):
```json
[
  {
    "id": 1,
    "name": "ЖК Приморский квартал",
    "city": "Санкт-Петербург",
    "address": "Богатырский проспект",
    "developer": "ООО Мегалит",
    "created": "2025-09-04"
  }
]
```

---

### Квартиры
**Base URL:** `/api/flats`

| Метод      | URL              | Описание                                       |
|------------|------------------|------------------------------------------------|
| `GET`      | `/api/flats`     | Список квартир с возможностью фильтрации по ЖК |
| `GET`      | `/api/flats/{id}` | Детали конкретной квартиры                     |

Пример ответа (`GET /api/flats`):
```json
{
  "content": [
    {
      "id": 101,
      "complexId": 1,
      "building": "Корпус 1",
      "number": "45",
      "floor": 5,
      "rooms": 2,
      "areaTotal": 65.5,
      "actualPriceTotal": 11500000,
      "actualPricePerM2": 175000,
      "createdAt": "2024-09-15T12:00:00"
    }
  ],
  "number": 0,
  "last": true
}
```

---

### История цен
**Base URL:** `/api/history`

| Метод      | URL             | Описание                              |
|------------|-----------------|---------------------------------------|
| `GET`      | `/api/history`  | Получить историю цен по конкретной квартире |

Пример ответа (`GET /api/history?flatId=101`):
```json
[
  {
    "id": 1,
    "flatId": 101,
    "priceTotal": 11500000,
    "pricePerM2": 175000,
    "createdAt": "2024-09-15T12:00:00"
  },
  {
    "id": 2,
    "flatId": 101,
    "priceTotal": 11600000,
    "pricePerM2": 176000,
    "createdAt": "2024-09-16T12:00:00"
  }
]
```

---

## Запуск

1. Склонировать репозиторий
    ```bash
    git clone https://github.com/yas-7/RealEstate.git
    cd RealEstate
    ```

2. Запустить контейнер PostgreSQL
    ```bash
    docker-compose up -d
    ```

3. Запустить Spring Boot приложение  и установить переменные окружения: `pg_password=... pg_user=... pg_url=...`
    ```bash
    ./gradlew bootRun
    ```

После запуска API будет доступно по адресу:  
**http://localhost:8082/api**

---

## Планы по развитию

- [ ] Добавить больше фичей по аналитике: изменение средней цены n-комнатных квартир
- [ ] Добавить больше застройщиков
- [ ] Добавить тесты
- [ ] Добавить админку с Spring Security
